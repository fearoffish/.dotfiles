{{- if .is_macos }}
/opt/homebrew/bin/brew shellenv | source
# Use 1Password SSH agent
set -gx SSH_AUTH_SOCK ~/Library/Group\ Containers/2BUA8C4S2C.com.1password/t/agent.sock
{{- else }}
/home/linuxbrew/.linuxbrew/bin/brew shellenv | source
# Use 1Password SSH agent
set -gx SSH_AUTH_SOCK ~/.1password/agent.sock
{{- end }}

if type -q zoxide
    if not test -r $__fish_cache_dir/zoxide_init.fish
        zoxide init fish >$__fish_cache_dir/zoxide_init.fish
    end
    source $__fish_cache_dir/zoxide_init.fish
end

# Disable new user greeting.
set fish_greeting

# Initialize starship.
if type -q starship
    set -gx STARSHIP_CONFIG $__fish_config_dir/themes/starship.toml
    starship init fish | source
end

if status is-interactive
    mise activate fish | source
else
    mise activate fish --shims | source
end
